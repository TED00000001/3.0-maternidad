<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tóxica como tú | Moda Materna Gamarra</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Dancing+Script:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <style>
              /* =========================================
                 1. VARIABLES Y ESTILOS GLOBALES
                 ========================================= */
              :root {
                  --primary: #e07a5f;
                  --primary-dark: #c45a40;

                  /* --- MODO CLARO (Default) --- */
                  --bg-body: #f9fbfd;
                  --bg-card: #ffffff;
                  --text-main: #2b2d42;
                  --text-sec: #666666;
                  --border-color: rgba(0,0,0,0.05);

                  /* Degradados Claros */
                  --grad-benefits: linear-gradient(120deg, #fdfbfb 0%, #fdede8 50%, #e6dee9 100%);
                  --grad-products: linear-gradient(120deg, #e6dee9 0%, #eef2f7 50%, #f5f7fa 100%);
                  --grad-testimonials: linear-gradient(120deg, #f5f7fa 0%, #e4effc 50%, #dbeafe 100%);

                  --success: #25d366;
                  --shadow_sm: 0 10px 30px rgba(0,0,0,0.05);
                  --shadow_hover: 0 20px 40px rgba(0,0,0,0.12);
                  --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
                  --container-padding: 5%;
                  --marquee-height: 40px;
                  --header-height: 80px;
                  --marquee-bg: #2b2d42;
              }

              /* --- MODO OSCURO --- */
              body.dark-mode {
                  --bg-body: #0b1120;
                  --bg-card: #1e293b;
                  --text-main: #ffffff;
                  --text-sec: #cbd5e1;
                  --border-color: rgba(255,255,255,0.1);
                  --shadow_sm: 0 10px 30px rgba(0,0,0,0.6);
                  --shadow_hover: 0 20px 40px rgba(0,0,0,0.8);

                  --grad-benefits: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #312e81 100%);
                  --grad-products: linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #1e293b 100%);
                  --grad-testimonials: linear-gradient(135deg, #312e81 0%, #1e1b4b 50%, #0f172a 100%);
              }

              * { margin: 0; padding: 0; box-sizing: border-box; }

              html { scroll-behavior: smooth; scroll-padding-top: calc(var(--marquee-height) + var(--header-height) + 20px); }

              body {
                  font-family: 'Poppins', sans-serif;
                  background-color: var(--bg-body);
                  color: var(--text-main);
                  line-height: 1.7;
                  overflow-x: hidden;
                  transition: background-color 0.4s ease, color 0.4s ease;
                  background-image: radial-gradient(var(--text-sec) 0.5px, transparent 0.5px);
                  background-size: 20px 20px;
                  background-blend-mode: overlay;
                  background-attachment: fixed;
              }

              /* =========================================
                 LOADER CON IMAGEN PERSONALIZADA
                 ========================================= */
              #loader {
                  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                  background: #ffffff; /* Fondo blanco para coincidir con la imagen */
                  z-index: 9999; display: flex; justify-content: center; align-items: center;
                  transition: opacity 0.5s ease;
              }
              /* Si activas modo oscuro, el loader sigue siendo blanco para que se vea bien la imagen */
              body.dark-mode #loader { background: #ffffff; }

              .loader-content {
                  display: flex; flex-direction: column; align-items: center;
              }

              .loader-img {
                  max-width: 250px; /* Tamaño del logo */
                  width: 80%;
                  height: auto;
                  animation: pulseLogo 2s infinite ease-in-out; /* Efecto de respiración */
              }

              @keyframes pulseLogo {
                  0% { transform: scale(1); opacity: 1; }
                  50% { transform: scale(1.05); opacity: 0.8; }
                  100% { transform: scale(1); opacity: 1; }
              }

              a { text-decoration: none; color: inherit; }
              button { font-family: inherit; cursor: pointer; outline: none; border: none; }
              input { font-family: inherit; outline: none; }

              ::-webkit-scrollbar { width: 8px; }
              ::-webkit-scrollbar-track { background: var(--bg-body); }
              ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }

              /* =========================================
                 ANIMACIONES
                 ========================================= */
              .fade-up { opacity: 0; transform: translateY(40px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
              .fade-up.visible { opacity: 1; transform: translateY(0); }

              .stagger-delay-1 { transition-delay: 0.1s; }
              .stagger-delay-2 { transition-delay: 0.2s; }
              .stagger-delay-3 { transition-delay: 0.3s; }

              @keyframes cardEntrance { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
              @keyframes pulse { 0% { opacity: 0.5; transform: scale(0.95); } 50% { opacity: 1; transform: scale(1); } 100% { opacity: 0.5; transform: scale(0.95); } }
              @keyframes shake { 0% { transform: rotate(0deg); } 25% { transform: rotate(15deg); } 50% { transform: rotate(-15deg); } 75% { transform: rotate(10deg); } 100% { transform: rotate(0deg); } }

              .cart-trigger.shaking { animation: shake 0.5s ease; color: var(--primary); }

              /* =========================================
                 2. BARRA DE ANUNCIOS (FIXED)
                 ========================================= */
              .marquee-container {
                  position: fixed; top: 0; left: 0; width: 100%; height: var(--marquee-height);
                  background-color: var(--marquee-bg); color: white; overflow: hidden; z-index: 1002;
                  font-size: 0.8rem; letter-spacing: 1px; text-transform: uppercase; display: flex; align-items: center;
              }
              .marquee-wrapper { display: flex; width: fit-content; animation: scrollLeft 30s linear infinite; }
              .marquee-content { display: flex; gap: 80px; padding-right: 80px; }
              .marquee-item { white-space: nowrap; font-weight: 600; display: flex; align-items: center; gap: 10px; }
              @keyframes scrollLeft { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

              /* =========================================
                 3. HEADER
                 ========================================= */
              header {
                  position: fixed;
                  top: var(--marquee-height);
                  left: 0; width: 100%;
                  height: var(--header-height);
                  z-index: 1001;
                  padding: 0 var(--container-padding);
                  display: flex; justify-content: space-between; align-items: center;
                  transition: all 0.4s ease;

                  background: rgba(255, 255, 255, 0.25);
                  backdrop-filter: blur(20px) saturate(180%);
                  -webkit-backdrop-filter: blur(20px) saturate(180%);
                  border-bottom: 1px solid rgba(255,255,255,0.2);
                  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.02);
              }

              body.dark-mode header {
                   background: rgba(15, 15, 20, 0.3);
                   border-bottom: 1px solid rgba(255,255,255,0.05);
              }

              .header-icons { display: flex; align-items: center; gap: 15px; }
              .logo { font-family: 'Dancing Script', cursive; font-size: 2.4rem; color: var(--primary); cursor: pointer; font-weight: 700; letter-spacing: -0.5px; }

              .icon-btn {
                  position: relative; font-size: 1.3rem; color: var(--text-main); transition: var(--transition); cursor: pointer;
                  width: 45px; height: 45px; background: transparent;
                  display: flex; align-items: center; justify-content: center; border-radius: 50%;
              }
              .icon-btn:hover { background: rgba(224, 122, 95, 0.1); color: var(--primary); transform: rotate(10deg); }

              .cart-badge {
                  position: absolute; top: 0px; right: 0px; background: var(--primary); color: white;
                  font-size: 0.7rem; width: 18px; height: 18px; border-radius: 50%; border: 2px solid var(--bg-card);
                  display: flex; align-items: center; justify-content: center; font-weight: 700; animation: pop 0.3s ease;
              }

              /* =========================================
                 4. HERO SECTION
                 ========================================= */
              .hero {
                  background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
                  min-height: 850px;
                  display: flex; align-items: center; justify-content: space-between;
                  padding: 0 var(--container-padding);
                  padding-top: calc(var(--marquee-height) + var(--header-height) + 40px);
                  color: white; position: relative; overflow: hidden;
              }

              .hero::before {
                  content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
                  background: radial-gradient(circle at 10% 20%, rgba(224, 122, 95, 0.3) 0%, transparent 60%);
                  z-index: 1; pointer-events: none;
              }

              .hero-content { flex: 0.9; max-width: 600px; z-index: 2; padding-right: 40px; position: relative; }

              .hero-content::after {
                  content: ''; position: absolute; top: 50%; left: 30%; transform: translate(-50%, -50%);
                  width: 140%; height: 140%;
                  background: radial-gradient(circle, rgba(224, 122, 95, 0.15) 0%, rgba(0,0,0,0) 70%);
                  z-index: -1; filter: blur(60px); animation: pulse 6s infinite ease-in-out;
              }

              .hero h1 { font-size: 4rem; line-height: 1.1; margin-bottom: 25px; font-weight: 700; letter-spacing: -1px; }
              .hero p { font-size: 1.15rem; margin-bottom: 40px; opacity: 0.9; font-weight: 300; max-width: 90%; }

              .btn-cta {
                  background: var(--primary); color: white; padding: 18px 45px;
                  border-radius: 50px; font-weight: 600; font-size: 1.05rem; transition: var(--transition);
                  box-shadow: 0 15px 30px rgba(224, 122, 95, 0.4); display: inline-block; letter-spacing: 0.5px;
              }
              .btn-cta:hover { background: white; color: var(--primary); transform: translateY(-5px); box-shadow: 0 20px 40px rgba(224, 122, 95, 0.6); }
              .btn-cta:active { transform: scale(0.98); }

              .hero-image { flex: 1.1; height: 100%; display: flex; justify-content: center; align-items: center; position: relative; z-index: 2; }
              .hero-slider-track { width: 100%; display: flex; justify-content: center; align-items: center; perspective: 1000px; }

              .hero-slide {
                  display: none; width: 480px; height: 650px;
                  object-fit: cover; object-position: top center; border-radius: 40px;
                  box-shadow: 25px 25px 50px rgba(0,0,0,0.5), -5px -5px 20px rgba(255,255,255,0.1);
                  border: 1px solid rgba(255, 255, 255, 0.2);
                  filter: brightness(1.05) contrast(1.05);
                  transition: all 0.5s ease; cursor: pointer;
              }
              .hero-slide.active { display: block; animation: heroEntrance 1s cubic-bezier(0.2, 1, 0.3, 1), float 6s ease-in-out infinite 1s; }
              .hero-slide:hover { filter: brightness(1.15) contrast(1.1) saturate(1.1); box-shadow: 0 0 50px rgba(255, 255, 255, 0.25), 0 30px 70px rgba(0,0,0,0.6); border-color: rgba(255, 255, 255, 0.4); }

              .slider-btn {
                  position: absolute; top: 50%; transform: translateY(-50%);
                  background: rgba(255, 255, 255, 0.1); color: white; border: 1px solid rgba(255,255,255,0.2);
                  width: 55px; height: 55px; border-radius: 50%; font-size: 1.2rem; cursor: pointer;
                  transition: var(--transition); backdrop-filter: blur(10px); z-index: 10;
                  display: flex; align-items: center; justify-content: center;
              }
              .slider-btn:hover { background: white; color: var(--primary); box-shadow: 0 0 20px rgba(255,255,255,0.4); }
              .slider-btn.prev { left: calc(50% - 320px); }
              .slider-btn.next { right: calc(50% - 320px); }

              @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-15px); } 100% { transform: translateY(0px); } }
              @keyframes heroEntrance { from { opacity: 0; transform: translateY(50px) scale(0.9) rotateX(10deg); } to { opacity: 1; transform: translateY(0) scale(1) rotateX(0); } }

              /* =========================================
                 5. SECCIONES
                 ========================================= */
              .benefits-section {
                  padding: 100px var(--container-padding); background: var(--grad-benefits);
                  display: flex; flex-wrap: wrap; justify-content: center; gap: 50px; text-align: center;
                  border-radius: 0 0 50px 50px; margin-bottom: 0; position: relative; z-index: 2;
              }
              .benefit-item { flex: 1 1 250px; max-width: 320px; padding: 30px; background: rgba(255,255,255,0.6); backdrop-filter: blur(10px); border-radius: 20px; transition: var(--transition); border: 1px solid rgba(255,255,255,0.5); }
              .benefit-item:hover { transform: translateY(-10px); background: white; box-shadow: var(--shadow_hover); }
              body.dark-mode .benefit-item { background: rgba(30, 41, 59, 0.4); border-color: rgba(255,255,255,0.1); }

              .benefit-icon { font-size: 3.5rem; color: var(--primary); margin-bottom: 20px; display: inline-block; }
              .benefit-title { font-size: 1.4rem; font-weight: 700; margin-bottom: 10px; color: var(--text-main); }
              .benefit-desc { color: var(--text-sec); font-size: 0.95rem; }

              .products-section-wrapper {
                  background: var(--grad-products); padding-top: 80px; margin-top: -50px; padding-bottom: 80px;
                  border-radius: 0 0 50px 50px; position: relative; z-index: 1; transition: var(--transition);
              }

              .controls { padding: 40px var(--container-padding); display: flex; flex-direction: column; align-items: center; gap: 30px; }
              .search-box { position: relative; width: 100%; max-width: 600px; }
              .search-input {
                  width: 100%; padding: 20px 60px 20px 30px; border-radius: 60px; border: 2px solid transparent;
                  background: var(--bg-card); color: var(--text-main); transition: var(--transition); box-shadow: var(--shadow_sm); font-size: 1.1rem;
              }
              .search-input:focus { border-color: var(--primary); box-shadow: 0 15px 30px rgba(224, 122, 95, 0.15); transform: translateY(-2px); }
              .fa-search { position: absolute; right: 30px; top: 50%; transform: translateY(-50%); color: var(--primary); font-size: 1.2rem; }

              .filters { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; }
              .filter-btn {
                  padding: 12px 35px; border-radius: 30px; background: var(--bg-card); color: var(--text-sec);
                  transition: var(--transition); font-weight: 600; box-shadow: var(--shadow_sm); border: 1px solid var(--border-color);
              }
              .filter-btn.active, .filter-btn:hover { background: var(--primary); color: white; transform: translateY(-3px); box-shadow: 0 10px 20px rgba(224, 122, 95, 0.3); border-color: var(--primary); }

              .products-grid {
                  display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                  gap: 50px; padding: 20px var(--container-padding) 40px;
              }

              .product-card {
                  background: var(--bg-card); border-radius: 25px; overflow: hidden;
                  box-shadow: var(--shadow_sm); transition: var(--transition);
                  position: relative; display: flex; flex-direction: column; group;
                  animation: cardEntrance 0.7s cubic-bezier(0.2, 1, 0.3, 1) forwards; opacity: 0;
                  border: 1px solid var(--border-color);
              }
              .product-card:nth-child(n) { animation-delay: calc(0.1s * var(--i)); }
              .product-card:hover { transform: translateY(-15px); box-shadow: var(--shadow_hover); }

              .badge {
                  position: absolute; top: 20px; left: 20px; padding: 6px 14px; border-radius: 30px;
                  font-size: 0.75rem; font-weight: 700; color: white; text-transform: uppercase;
                  z-index: 5; box-shadow: 0 5px 15px rgba(0,0,0,0.2); letter-spacing: 1px;
              }
              .badge.new { background: #3498db; }
              .badge.sale { background: #e74c3c; }

              .p-image { height: 350px; overflow: hidden; position: relative; cursor: pointer; background-color: #eee; }
              .p-image img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.8s cubic-bezier(0.25, 0.8, 0.25, 1); }
              .product-card:hover .p-image img { transform: scale(1.1); }

              .p-image::before {
                  content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
                  background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 100%);
                  transform: skewX(-25deg); z-index: 2; transition: none;
              }
              .product-card:hover .p-image::before { left: 200%; transition: left 0.7s ease-in-out; }

              .quick-view-btn {
                  position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%) translateY(20px);
                  background: white; color: #2b2d42; padding: 12px 30px; border-radius: 30px;
                  font-size: 0.9rem; font-weight: 600; opacity: 0; transition: var(--transition); z-index: 6;
                  box-shadow: 0 10px 20px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 8px;
              }
              .product-card:hover .quick-view-btn { transform: translateX(-50%) translateY(0); opacity: 1; }
              .quick-view-btn:hover { background: var(--primary); color: white; }

              .p-info { padding: 30px; display: flex; flex-direction: column; flex-grow: 1; text-align: center; }
              .p-cat { font-size: 0.8rem; color: var(--text-sec); text-transform: uppercase; letter-spacing: 2px; font-weight: 600; margin-bottom: 8px; opacity: 0.7; }
              .p-title { font-size: 1.3rem; font-weight: 600; margin: 0 0 15px; color: var(--text-main); line-height: 1.3; }
              .p-price { font-size: 1.5rem; font-weight: 700; color: var(--primary); margin-top: auto; }

              .testimonials-section {
                  padding: 100px var(--container-padding); background: var(--grad-testimonials);
                  text-align: center; transition: var(--transition);
                  border-radius: 50px 50px 0 0; margin-top: -50px; padding-top: 100px; position: relative; z-index: 0;
              }
              /* ID PARA LINK */
              #testimonios { scroll-margin-top: 120px; }

              .section-title { font-size: 2.8rem; color: var(--text-main); margin-bottom: 60px; font-weight: 700; position: relative; display: inline-block; }
              .section-title::after { content: ''; position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%); width: 80px; height: 5px; background: var(--primary); border-radius: 10px; transition: width 0.3s ease; }
              .section-title:hover::after { width: 120px; }

              .reviews-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 40px; }
              .review-card {
                  background: var(--bg-card); padding: 50px 30px; border-radius: 25px;
                  box-shadow: var(--shadow_sm); display: flex; flex-direction: column; align-items: center;
                  transition: var(--transition); position: relative;
              }
              .review-card::before { content: '“'; position: absolute; top: 10px; left: 20px; font-size: 6rem; color: var(--primary); opacity: 0.1; font-family: serif; }
              .review-card:hover { transform: translateY(-10px); box-shadow: var(--shadow_hover); }
              .stars { color: #f1c40f; font-size: 1.2rem; margin-bottom: 20px; }
              .review-text { font-style: italic; color: var(--text-sec); margin-bottom: 25px; font-size: 1.1rem; line-height: 1.8; }
              .review-author { font-weight: 700; color: var(--text-main); font-size: 1rem; text-transform: uppercase; letter-spacing: 1px; }

              /* =========================================
                 8. MODALES Y CARRITO (CORREGIDO RESPONSIVE)
                 ========================================= */
              .overlay {
                  position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0, 0.6);
                  z-index: 2000; opacity: 0; visibility: hidden; transition: var(--transition); backdrop-filter: blur(10px);
              }
              .overlay.active { opacity: 1; visibility: visible; }

              .modal {
                  position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9);
                  background: var(--bg-card); width: 95%; max-width: 1000px; border-radius: 30px; z-index: 2100;
                  opacity: 0; visibility: hidden; transition: all 0.4s cubic-bezier(0.2, 1, 0.3, 1);
                  display: grid; grid-template-columns: 1fr 1fr; overflow: hidden;
                  box-shadow: var(--shadow_hover); color: var(--text-main);
              }
              .modal.active { transform: translate(-50%, -50%) scale(1); opacity: 1; visibility: visible; }

              /* --- ESTILOS CARRUSEL MODAL --- */
              .modal-img-container {
                  height: 100%; min-height: 500px; background: #eee;
                  position: relative; overflow: hidden;
              }

              .modal-slider-track {
                  display: flex; height: 100%; width: 100%;
                  transition: transform 0.5s ease-in-out;
              }

              .modal-slide {
                  min-width: 100%; height: 100%; object-fit: cover;
              }

              .modal-slider-btn {
                  position: absolute; top: 50%; transform: translateY(-50%);
                  background: rgba(255, 255, 255, 0.3); color: var(--text-main);
                  width: 45px; height: 45px; border-radius: 50%; font-size: 1.1rem; cursor: pointer;
                  transition: var(--transition); backdrop-filter: blur(5px); z-index: 10;
                  display: flex; align-items: center; justify-content: center;
                  border: 1px solid rgba(255,255,255,0.4);
              }
              .modal-slider-btn:hover { background: white; color: var(--primary); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
              .modal-slider-btn.prev { left: 20px; }
              .modal-slider-btn.next { right: 20px; }

              .modal-content { padding: 60px; position: relative; display: flex; flex-direction: column; justify-content: center; }
              .close-modal {
                  position: absolute; top: 30px; right: 30px; font-size: 1.5rem; color: var(--text-sec);
                  cursor: pointer; transition: var(--transition); z-index: 2; width: 40px; height: 40px; border-radius: 50%; background: var(--bg-body); display: flex; align-items: center; justify-content: center;
              }
              .close-modal:hover { background: var(--primary); color: white; transform: rotate(90deg); }

              #m-cat-label { color: var(--primary); font-weight: 700; letter-spacing: 2px; font-size: 0.85rem; text-transform: uppercase; margin-bottom: 10px; display: block; }
              #m-title { font-size: 2.5rem; margin: 0 0 20px; line-height: 1.1; }
              #m-price { color: var(--primary); font-size: 2.2rem; font-weight: 700; margin-bottom: 30px; }
              #m-desc { margin-bottom: 40px; color: var(--text-sec); font-size: 1.1rem; line-height: 1.8; }

              .sizes-label { display: block; font-weight: 600; margin-bottom: 15px; color: var(--text-main); }
              .sizes { display: flex; gap: 15px; margin-bottom: 40px; }
              .size-opt {
                  width: 55px; height: 55px; border: 2px solid var(--border-color); border-radius: 15px; background: var(--bg-body);
                  display: flex; align-items: center; justify-content: center; cursor: pointer;
                  transition: var(--transition); font-weight: 600; color: var(--text-sec);
              }
              .size-opt:hover { border-color: var(--primary); color: var(--primary); transform: translateY(-3px); }
              .size-opt.selected { background: var(--primary); color: white; border-color: var(--primary); transform: translateY(-3px); box-shadow: 0 10px 20px rgba(224, 122, 95, 0.3); }

              .btn-add {
                  width: 100%; padding: 20px; background: var(--primary); color: white;
                  border-radius: 15px; font-weight: 700; font-size: 1.2rem; transition: var(--transition);
                  display: flex; align-items: center; justify-content: center; gap: 15px;
              }
              .btn-add:hover:not(:disabled) { background: var(--primary-dark); transform: translateY(-3px); box-shadow: 0 15px 30px rgba(224, 122, 95, 0.4); }
              .btn-add:disabled { background: #ccc; color: #888; cursor: not-allowed; }

              /* --- CORRECCIÓN CARRITO RESPONSIVE --- */
              .cart-sidebar {
                  position: fixed;
                  top: 0;
                  right: 0; /* Fijamos a la derecha */
                  width: 500px;
                  max-width: 100%;
                  height: 100%;
                  background: var(--bg-card); color: var(--text-main);
                  z-index: 2200;
                  /* Usamos transform para moverlo. Es más performante y evita el bug */
                  transform: translateX(100%);
                  transition: transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
                  display: flex; flex-direction: column;
                  box-shadow: -20px 0 50px rgba(0,0,0,0.2);
              }

              /* Cuando está activo, vuelve a la posición 0 (visible) */
              .cart-sidebar.active {
                  transform: translateX(0);
              }

              .cart-header {
                  padding: 30px; background: var(--bg-card); color: var(--text-main);
                  display: flex; justify-content: space-between; align-items: center;
                  border-bottom: 1px solid var(--border-color);
              }
              .cart-body { flex-grow: 1; overflow-y: auto; padding: 30px; }
              .cart-empty-state { text-align: center; padding-top: 50%; color: var(--text-sec); display: flex; flex-direction: column; align-items: center; gap: 15px; }
              .cart-empty-state i { font-size: 4rem; color: var(--text-sec); opacity: 0.3; margin-bottom: 10px; }

              .cart-item { display: flex; gap: 20px; margin-bottom: 25px; padding-bottom: 25px; border-bottom: 1px solid var(--border-color); align-items: center; animation: slideInRight 0.4s ease forwards; }
              @keyframes slideInRight { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }

              .cart-item img { width: 90px; height: 120px; object-fit: cover; border-radius: 12px; }
              .cart-item-info { flex-grow: 1; }
              .cart-item-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 5px; }
              .cart-item-meta { font-size: 0.9rem; color: var(--text-sec); margin-bottom: 10px; display: block; }
              .cart-item-price { color: var(--primary); font-weight: 700; font-size: 1.2rem; }

              .qty-controls { display: flex; align-items: center; background: var(--bg-body); border-radius: 30px; padding: 5px; width: fit-content; margin-top: 10px; border: 1px solid var(--border-color); }
              .qty-btn { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: var(--bg-card); border-radius: 50%; font-weight: 600; color: var(--text-main); transition: var(--transition); box-shadow: var(--shadow_sm); }
              .qty-btn:hover { background: var(--primary); color: white; transform: scale(1.1); }
              .qty-count { margin: 0 15px; font-weight: 600; }

              .btn-delete {
          background-color: transparent; /* ESTO ES LO IMPORTANTE: Quita el fondo blanco */
          border: none;
          cursor: pointer;
          color: var(--text-sec);
          transition: var(--transition);
          padding: 10px;
          font-size: 1.2rem; /* Asegura un buen tamaño */
      }

      /* Opcional: Para que se ponga rojo al pasar el mouse */
      .btn-delete:hover {
          color: #ff4757;
          transform: scale(1.2) rotate(10deg);
      }
              .btn-delete:hover { color: #ff4757; transform: scale(1.2) rotate(10deg); }

              .cart-footer { padding: 40px 30px; background: var(--bg-card); border-top: 1px solid var(--border-color); }
              .cart-total-row { display: flex; justify-content: space-between; font-size: 1.5rem; font-weight: 700; margin-bottom: 25px; color: var(--text-main); }
              .cart-total-amount { color: var(--primary); }
              .btn-whatsapp {
                  width: 100%; padding: 20px; background: var(--success); color: white;
                  border-radius: 50px; font-size: 1.1rem; font-weight: 700; display: flex; align-items: center;
                  justify-content: center; gap: 12px; transition: var(--transition);
                  box-shadow: 0 10px 25px rgba(37, 211, 102, 0.4);
              }
              .btn-whatsapp:hover { background: #1ebe57; transform: translateY(-3px); box-shadow: 0 15px 35px rgba(37, 211, 102, 0.6); }

              .toast {
                  position: fixed; top: 30px; left: 50%; transform: translateX(-50%) translateY(-100px);
                  background: var(--text-main); color: var(--bg-card); padding: 15px 40px; border-radius: 50px;
                  box-shadow: var(--shadow_lg); z-index: 3000; opacity: 0; visibility: hidden; transition: var(--transition);
                  display: flex; align-items: center; gap: 12px; font-weight: 600;
              }
              .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; visibility: visible; }

              @keyframes pop { 50% { transform: scale(1.2); } }

              /* Botón Volver Arriba */
              #back-to-top {
                  position: fixed; bottom: 30px; right: 30px;
                  width: 50px; height: 50px; background: var(--primary); color: white;
                  border-radius: 50%; display: flex; align-items: center; justify-content: center;
                  font-size: 1.2rem; cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.2);
                  opacity: 0; visibility: hidden; transition: var(--transition); z-index: 900;
              }
              #back-to-top.show { opacity: 1; visibility: visible; transform: translateY(0); }
              #back-to-top:hover { background: var(--primary-dark); transform: translateY(-5px); }

              /* =========================================
                 9. FOOTER MEJORADO Y CORREGIDO
                 ========================================= */
              footer {
                  background-color: #1a1b26;
                  color: #ffffff;
                  padding-top: 80px; padding-bottom: 40px; font-size: 0.95rem; position: relative; z-index: 10;
              }

              .footer-container {
                  display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                  gap: 60px; padding: 0 var(--container-padding); margin-bottom: 60px;
              }

              .footer-col h3 {
                  color: white; font-size: 1.3rem; margin-bottom: 30px; font-weight: 600;
                  position: relative; display: inline-block;
              }
              .footer-col h3::after {
                  content: ''; position: absolute; left: 0; bottom: -10px;
                  width: 40px; height: 3px; background-color: var(--primary); border-radius: 2px;
              }

              .footer-brand .f-logo { font-family: 'Dancing Script', cursive; font-size: 2.5rem; color: var(--primary); margin-bottom: 20px; display: block; }
              .footer-brand p { margin-bottom: 25px; line-height: 1.8; opacity: 1; color: #e2e8f0; }

              .social-links { display: flex; gap: 15px; }
              .social-btn {
                  width: 45px; height: 45px; background: rgba(255,255,255,0.05); border-radius: 50%;
                  display: flex; align-items: center; justify-content: center; color: white; transition: var(--transition); text-decoration: none;
              }
              .social-btn:hover { background: var(--primary); transform: translateY(-5px); }

              .footer-links { list-style: none; }
              .footer-links li { margin-bottom: 15px; }
              .footer-links a {
                  text-decoration: none;
                  color: #e2e8f0;
                  transition: var(--transition); display: inline-flex; align-items: center; gap: 10px;
              }
              .footer-links a:hover { color: var(--primary); transform: translateX(5px); }
              .footer-links i { font-size: 0.8rem; color: var(--primary); }

              .contact-row { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 20px; }
              .contact-row i { color: var(--primary); font-size: 1.2rem; margin-top: 5px; }
              .contact-row span { color: #ffffff; }

              .footer-bottom {
                  border-top: 1px solid rgba(255,255,255,0.05); padding-top: 40px; text-align: center;
                  padding-left: var(--container-padding); padding-right: var(--container-padding);
                  display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 20px; font-size: 0.9rem;
                  opacity: 1; color: #ffffff;
              }

              .payment-icons {
                  display: flex; gap: 15px; align-items: center; flex-wrap: wrap;
              }
              .pay-icon {
                  background-color: #ffffff; padding: 10px 25px; border-radius: 12px;
                  font-weight: 700; font-size: 1rem; cursor: pointer;
                  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
                  box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 1px solid rgba(0,0,0,0.05); letter-spacing: 0.5px;
              }
              .pay-icon.yape { color: #742284; }
              .pay-icon.bcp { color: #002a8d; }
              .pay-icon.plin { color: #00d2aa; }
              .pay-icon:hover {
                  transform: translateY(-5px); box-shadow: 0 10px 20px rgba(255, 255, 255, 0.2); background-color: #fff;
              }

              /* --- RESPONSIVE OPTIMIZADO --- */
              @media (max-width: 992px) {
                  .hero {
                      flex-direction: column; text-align: center; justify-content: center;
                      padding-top: 160px; padding-bottom: 80px; min-height: auto;
                  }
                  .hero-content { padding-right: 0; margin-bottom: 60px; max-width: 100%; }
                  .hero-content::before { width: 100%; height: 100%; top: 50%; left: 50%; }
                  .hero-image { width: 100%; }
                  .hero-slide { height: 450px; width: 90vw; max-width: 380px; }
                  .slider-btn { width: 45px; height: 45px; background: rgba(255,255,255,0.2); }
                  .slider-btn.prev { left: 15px; }
                  .slider-btn.next { right: 15px; }
                  .hero h1 { font-size: 3rem; }

                  /* Modal Responsive */
                  .modal { width: 90%; max-width: 600px; grid-template-columns: 1fr; height: auto; max-height: 90vh; overflow-y: auto; }
                  .modal-img-container { height: 350px; min-height: auto; }
                  .modal-content { padding: 40px; }
                  .close-modal { top: 15px; right: 15px; background: var(--bg-card); box-shadow: var(--shadow_sm); }
              }

              @media (max-width: 768px) {
                  :root { --container-padding: 20px; }
                  .logo { font-size: 1.8rem; }
                  .hero h1 { font-size: 2.5rem; }
                  .benefits-section { padding: 60px var(--container-padding); gap: 40px; }
                  .products-grid { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 30px; }
                  .p-image { height: 300px; }

                  /* Ajuste carrito móvil */
                  .cart-sidebar { width: 100%; }

                  .section-title { font-size: 2rem; }
                  .footer-bottom { flex-direction: column; text-align: center; }
                  .footer-col { text-align: center; }
                  .footer-col h3::after { left: 50%; transform: translateX(-50%); }
                  .social-links { justify-content: center; }
                  .contact-row { display: flex; justify-content: center; text-align: left; width: 100%; }
                  .payment-icons { justify-content: center; }
              }
    </style>
  </head>
  <body>
    <div id="loader">
      <div class="loader-content">
        <img
          src="https://github.com/TED00000001/Ropa-maternidadddddd/blob/main/imagenes/carga.jpg?raw=true"
          alt="Cargando..."
          class="loader-img"
        />
      </div>
    </div>

    <div
      id="back-to-top"
      onclick="window.scrollTo({top: 0, behavior: 'smooth'})"
    >
      <i class="fas fa-arrow-up"></i>
    </div>

    <div class="toast" id="toast">
      <i class="fas fa-check-circle" style="color: var(--success)"></i>
      <span>Producto agregado al carrito</span>
    </div>

    <div class="overlay" id="overlay" onclick="closeAll()"></div>

    <div class="marquee-container">
      <div class="marquee-wrapper">
        <div class="marquee-content">
          <div class="marquee-item">
            <i class="fas fa-credit-card"></i> ACEPTAMOS BCP, YAPE Y PLIN
          </div>
          <div class="marquee-item">
            <i class="fas fa-map-marker-alt"></i> VISÍTANOS EN FRONTERAS UNIDAS
            DE GRAU 533
          </div>
          <div class="marquee-item">
            <i class="fas fa-truck-fast"></i> ENVÍOS EN LA ESTACIÓN GRAU
          </div>
        </div>
        <div class="marquee-content">
          <div class="marquee-item">
            <i class="fas fa-credit-card"></i> ACEPTAMOS BCP, YAPE Y PLIN
          </div>
          <div class="marquee-item">
            <i class="fas fa-map-marker-alt"></i> VISÍTANOS EN FRONTERAS UNIDAS
            DE GRAU 533
          </div>
          <div class="marquee-item">
            <i class="fas fa-truck-fast"></i> TIENDA C1 (337-338-339)
          </div>
        </div>
      </div>
    </div>

    <header>
      <div class="logo" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        Tóxica como tú
      </div>

      <div class="header-icons">
        <button
          class="icon-btn"
          onclick="toggleTheme()"
          id="theme-btn"
          title="Cambiar tema"
        >
          <i class="fas fa-moon"></i>
        </button>

        <div
          class="icon-btn cart-trigger"
          onclick="toggleCart()"
          title="Ver carrito"
        >
          <i class="fas fa-shopping-bag"></i>
          <span class="cart-badge" id="cart-count">0</span>
        </div>
      </div>
    </header>

    <section class="hero">
      <div class="hero-content">
        <h1 class="fade-up stagger-delay-1">Estilo que abraza tu embarazo</h1>
        <p class="fade-up stagger-delay-2">
          Descubre la colección perfecta donde la comodidad se encuentra con el
          estilo. Prendas modernas y elegantes diseñadas especialmente para
          acompañarte en esta etapa única.
        </p>
        <div class="fade-up stagger-delay-3">
          <button
            class="btn-cta"
            onclick="document.getElementById('catalogo').scrollIntoView({behavior: 'smooth'})"
          >
            Explorar Colección
          </button>
        </div>
      </div>

      <div class="hero-image fade-up stagger-delay-2">
        <button class="slider-btn prev" onclick="moveHeroSlide(-1)">
          <i class="fas fa-chevron-left"></i>
        </button>

        <div class="hero-slider-track">
          <img
            src="https://ted00000001.github.io/Ropa-maternidadddddd/imagenes/imagen4.png"
            class="hero-slide active"
            alt="Ropa Materna 1"
          />
          <img
            src="https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=600&q=80"
            class="hero-slide"
            alt="Ropa Materna 2"
          />
          <img
            src="https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=600&q=80"
            class="hero-slide"
            alt="Ropa Materna 3"
          />
        </div>

        <button class="slider-btn next" onclick="moveHeroSlide(1)">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </section>

    <section class="benefits-section">
      <div class="benefit-item fade-up stagger-delay-1">
        <div class="benefit-icon"><i class="fas fa-shield-heart"></i></div>
        <h3 class="benefit-title">Compra Segura</h3>
        <p class="benefit-desc">
          Tus pagos son 100% seguros con Yape, Plin o transferencia BCP.
        </p>
      </div>
      <div class="benefit-item fade-up stagger-delay-2">
        <div class="benefit-icon"><i class="fas fa-shirt"></i></div>
        <h3 class="benefit-title">Calidad Premium</h3>
        <p class="benefit-desc">
          Prendas de algodón reactivo y denim stretch que cuidan tu piel.
        </p>
      </div>
      <div class="benefit-item fade-up stagger-delay-3">
        <div class="benefit-icon"><i class="fas fa-truck-ramp-box"></i></div>
        <h3 class="benefit-title">Envíos Flexibles</h3>
        <p class="benefit-desc">
          Recoge tus pedidos en la tienda o entregas en la estación Grau.
        </p>
      </div>
    </section>

    <section class="products-section-wrapper" id="catalogo">
      <div class="controls fade-up">
        <div class="search-box">
          <input
            type="text"
            id="search"
            class="search-input"
            placeholder="¿Qué estás buscando hoy? (ej. Jeans, Vestido...)"
            onkeyup="filterProducts()"
          />
          <i class="fas fa-search"></i>
        </div>
        <div class="filters">
          <button class="filter-btn active" onclick="filterCat('todos', this)">
            Ver Todos
          </button>
          <button class="filter-btn" onclick="filterCat('jeans', this)">
            Jeans Maternos
          </button>
          <button class="filter-btn" onclick="filterCat('polos', this)">
            Polos & Blusas
          </button>
          <button class="filter-btn" onclick="filterCat('vestidos', this)">
            Vestidos
          </button>
        </div>
      </div>

      <div class="products-grid" id="grid"></div>
    </section>

    <section class="testimonials-section" id="testimonios">
      <h2 class="section-title fade-up">Lo que dicen nuestras mamis</h2>
      <div class="reviews-grid">
        <div class="review-card fade-up stagger-delay-1">
          <div class="stars">
            <i class="fas fa-star"></i><i class="fas fa-star"></i
            ><i class="fas fa-star"></i><i class="fas fa-star"></i
            ><i class="fas fa-star"></i>
          </div>
          <p class="review-text">
            "¡Me encantó! La ropa es súper cómoda y la tela de excelente
            calidad. El pedido llegó a Arequipa súper rápido y la atención fue
            A1."
          </p>
          <div class="review-author">Andrea R. - Arequipa</div>
        </div>
        <div class="review-card fade-up stagger-delay-2">
          <div class="stars">
            <i class="fas fa-star"></i><i class="fas fa-star"></i
            ><i class="fas fa-star"></i><i class="fas fa-star"></i
            ><i class="fas fa-star"></i>
          </div>
          <p class="review-text">
            "Me encantan los jeans, la faja es perfecta, sujeta sin apretar la
            pancita. Definitivamente volveré a comprar aquí."
          </p>
          <div class="review-author">Carla M. - Lima</div>
        </div>
        <div class="review-card fade-up stagger-delay-3">
          <div class="stars">
            <i class="fas fa-star"></i><i class="fas fa-star"></i
            ><i class="fas fa-star"></i><i class="fas fa-star"></i
            ><i class="fas fa-star-half-alt"></i>
          </div>
          <p class="review-text">
            "Los polos de lactancia son unos salvadores y tienen diseños muy
            lindos, nada aburridos. Gracias Tóxica como tú por pensar en
            nosotras."
          </p>
          <div class="review-author">Sofia L. - Trujillo</div>
        </div>
      </div>
    </section>

    <footer>
      <div class="footer-container">
        <div class="footer-col footer-brand">
          <span class="f-logo">Tóxica como tú</span>
          <p>
            Moda materna con actitud para las mamis de hoy. Diseños exclusivos,
            cómodos y llenos de estilo desde el corazón de Gamarra.
          </p>
          <div class="social-links">
            <a href="#" class="social-btn"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="social-btn"><i class="fab fa-instagram"></i></a>
            <a href="#" class="social-btn"><i class="fab fa-tiktok"></i></a>
          </div>
        </div>

        <div class="footer-col">
          <h3>Explorar</h3>
          <ul class="footer-links">
            <li>
              <a href="#" onclick="window.scrollTo(0,0)"
                ><i class="fas fa-chevron-right"></i> Inicio</a
              >
            </li>
            <li>
              <a href="#catalogo"
                ><i class="fas fa-chevron-right"></i> Catálogo Completo</a
              >
            </li>
            <li>
              <a href="#testimonios"
                ><i class="fas fa-chevron-right"></i> Comentarios de mamis</a
              >
            </li>
          </ul>
        </div>

        <div class="footer-col">
          <h3>Contáctanos</h3>
          <div class="contact-row">
            <i class="fas fa-map-marker-alt"></i>
            <span
              >Galería Fronteras Unidas<br />Av. Grau 533, Tienda C1<br />La
              Victoria, Lima</span
            >
          </div>
          <div class="contact-row">
            <i class="fab fa-whatsapp"></i>
            <span>+51 903 538 378<br /><small>Atención 9am - 8pm</small></span>
          </div>
          <div class="contact-row">
            <i class="fas fa-envelope"></i>
            <span>hola@toxicacomotu.com</span>
          </div>
        </div>

        <div class="footer-col">
          <h3>Métodos de Pago</h3>
          <p style="margin-bottom: 15px">
            Aceptamos todas las billeteras digitales y transferencias para tu
            comodidad.
          </p>

          <div class="payment-icons">
            <div class="pay-icon yape" title="Yape">Yape</div>
            <div class="pay-icon bcp" title="BCP">BCP</div>
            <div class="pay-icon plin" title="Plin">Plin</div>
          </div>

          <p
            style="margin-top: 20px; font-size: 0.85rem; color: var(--primary)"
          >
            <i class="fas fa-lock"></i> Compra 100% Segura
          </p>
        </div>
      </div>

      <div class="footer-bottom">
        <p>
          &copy; 2025 <strong>Tóxica como tú</strong>. Todos los derechos
          reservados.
        </p>
        <p>
          Hecho con
          <i class="fas fa-heart" style="color: var(--primary)"></i> en Perú.
        </p>
      </div>
    </footer>

    <div class="modal" id="modal">
      <div class="modal-img-container">
        <button class="modal-slider-btn prev" onclick="moveModalSlide(-1)">
          ❮
        </button>
        <div class="modal-slider-track" id="m-slider-track"></div>
        <button class="modal-slider-btn next" onclick="moveModalSlide(1)">
          ❯
        </button>
      </div>

      <div class="modal-content">
        <i class="fas fa-times close-modal" onclick="closeAll()"></i>
        <div>
          <span id="m-cat-label">CATEGORÍA</span>
          <h2 id="m-title">Nombre Producto</h2>
          <h3 id="m-price">S/ 0.00</h3>
          <p id="m-desc">Descripción del producto...</p>
        </div>

        <div class="sizes-container">
          <span class="sizes-label">Selecciona tu talla:</span>
          <div class="sizes">
            <div class="size-opt" onclick="selectSize(this, 'S')">S</div>
            <div class="size-opt" onclick="selectSize(this, 'M')">M</div>
            <div class="size-opt" onclick="selectSize(this, 'L')">L</div>
            <div class="size-opt" onclick="selectSize(this, 'XL')">XL</div>
          </div>
        </div>

        <button
          class="btn-add"
          id="btn-add-modal"
          onclick="addToCartModal()"
          disabled
        >
          <i class="fas fa-shopping-bag"></i> Selecciona una talla
        </button>
      </div>
    </div>

    <div class="cart-sidebar" id="cart-sidebar">
      <div class="cart-header">
        <h3>Mi Bolsa de Compras</h3>
        <i
          class="fas fa-times"
          onclick="toggleCart()"
          style="
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--text-sec);
            padding: 5px;
          "
        ></i>
      </div>
      <div class="cart-body" id="cart-body"></div>
      <div class="cart-footer">
        <div class="cart-total-row">
          <span>Total Estimado:</span>
          <span class="cart-total-amount" id="cart-total">S/ 0.00</span>
        </div>
        <button class="btn-whatsapp" onclick="checkout()">
          <i class="fab fa-whatsapp" style="font-size: 1.3rem"></i> Completar
          Pedido por WhatsApp
        </button>
      </div>
    </div>

    <script>
      /* =========================================
           SCRIPT: LOADER, SCROLL REVEAL Y BACK-TO-TOP
           ========================================= */
      window.addEventListener("load", function () {
        const loader = document.getElementById("loader");
        loader.style.opacity = "0";
        setTimeout(() => {
          loader.style.display = "none";
        }, 500);
      });

      document.addEventListener("DOMContentLoaded", function () {
        const observerOptions = {
          root: null,
          rootMargin: "0px",
          threshold: 0.15,
        };
        const observerCallback = (entries, observer) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
              observer.unobserve(entry.target);
            }
          });
        };
        const observer = new IntersectionObserver(
          observerCallback,
          observerOptions
        );
        document
          .querySelectorAll(".fade-up")
          .forEach((target) => observer.observe(target));

        const backToTopBtn = document.getElementById("back-to-top");
        window.addEventListener("scroll", () => {
          if (window.scrollY > 500) {
            backToTopBtn.classList.add("show");
          } else {
            backToTopBtn.classList.remove("show");
          }
        });
      });

      /* =========================================
           LOGICA: MODO OSCURO / CLARO
           ========================================= */
      const savedTheme = localStorage.getItem("theme");
      const themeBtn = document.getElementById("theme-btn");

      if (savedTheme === "dark") {
        document.body.classList.add("dark-mode");
        themeBtn.innerHTML = '<i class="fas fa-sun"></i>';
      }

      function toggleTheme() {
        document.body.classList.toggle("dark-mode");
        const isDark = document.body.classList.contains("dark-mode");
        if (isDark) {
          themeBtn.innerHTML = '<i class="fas fa-sun"></i>';
          localStorage.setItem("theme", "dark");
        } else {
          themeBtn.innerHTML = '<i class="fas fa-moon"></i>';
          localStorage.setItem("theme", "light");
        }
      }

      /* =========================================
           LOGICA DEL SLIDER HERO
           ========================================= */
      let currentHeroSlide = 0;
      function moveHeroSlide(n) {
        const slides = document.getElementsByClassName("hero-slide");
        slides[currentHeroSlide].classList.remove("active");
        currentHeroSlide += n;
        if (currentHeroSlide >= slides.length) currentHeroSlide = 0;
        if (currentHeroSlide < 0) currentHeroSlide = slides.length - 1;
        slides[currentHeroSlide].classList.add("active");
      }
      setInterval(() => {
        moveHeroSlide(1);
      }, 5000);

      /* =========================================
           LOGICA TIENDA (CON BADGES Y DATA)
           ========================================= */
      const products = [
        {
          id: 1,
          name: "Jean Materno High Waist",
          price: 85.0,
          cat: "jeans",
          badge: "OFERTA",
          img: "https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=600&q=80",
          images: [
            "https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=600&q=80",
            "https://images.unsplash.com/photo-1576995853123-5a297da40303?w=600&q=80",
            "https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?w=600&q=80",
          ],
          desc: "El favorito de todas. Jean con faja alta de algodón súper suave.",
        },
        {
          id: 2,
          name: "Blusa Lactancia 'Fresh'",
          price: 55.0,
          cat: "polos",
          badge: "NUEVO",
          img: "https://images.unsplash.com/photo-1584273143981-41c073dfe8f6?w=600&q=80",
          images: [
            "https://images.unsplash.com/photo-1584273143981-41c073dfe8f6?w=600&q=80",
            "https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600&q=80",
          ],
          desc: "Diseñada para el embarazo y post-parto. Sistema de apertura invisible.",
        },
        {
          id: 3,
          name: "Vestido Maxi Floral Boho",
          price: 75.0,
          cat: "vestidos",
          badge: "",
          img: "https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?w=600&q=80",
          images: [
            "https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?w=600&q=80",
            "https://images.unsplash.com/photo-1496747611176-843222e1e57c?w=600&q=80",
          ],
          desc: "El vestido soñado para tu sesión de fotos o Baby Shower.",
        },
        {
          id: 4,
          name: "Overol Clásico Regulable",
          price: 95.0,
          cat: "jeans",
          badge: "",
          img: "https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=600&q=80",
          images: [
            "https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=600&q=80",
            "https://images.unsplash.com/photo-1582142327317-09a6568853f3?w=600&q=80",
          ],
          desc: "Un clásico que nunca falla. Denim con tirantes regulables.",
        },
        {
          id: 5,
          name: "Polo 'Baby Loading'",
          price: 35.0,
          cat: "polos",
          badge: "POPULAR",
          img: "https://images.unsplash.com/photo-1555252333-9f8e92e65df9?w=600&q=80",
          images: [
            "https://images.unsplash.com/photo-1555252333-9f8e92e65df9?w=600&q=80",
          ],
          desc: "Ponle humor a la espera con este polo de algodón pima 100%.",
        },
        {
          id: 6,
          name: "Leggings Básicos Premium",
          price: 40.0,
          cat: "jeans",
          badge: "",
          img: "https://images.unsplash.com/photo-1506619216599-9d16d0903dfd?w=600&q=80",
          images: [
            "https://images.unsplash.com/photo-1506619216599-9d16d0903dfd?w=600&q=80",
            "https://images.unsplash.com/photo-1483985988355-763728e1935b?w=600&q=80",
          ],
          desc: "Tus mejores aliados. Leggings de algodón lycrado que NO traslucen.",
        },
      ];

      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      let currentModalProduct = null;
      let selectedSize = null;
      let currentModalSlide = 0;

      function render(list) {
        const grid = document.getElementById("grid");
        grid.innerHTML = "";
        if (list.length === 0) {
          grid.innerHTML =
            '<p style="grid-column: 1/-1; text-align: center; color: var(--text-sec); font-size: 1.2rem; margin-top: 30px;">No encontramos productos con esa búsqueda :(</p>';
          return;
        }
        list.forEach((p, index) => {
          let badgeHTML = "";
          if (p.badge === "NUEVO")
            badgeHTML = '<span class="badge new">NUEVO</span>';
          else if (p.badge === "OFERTA")
            badgeHTML = '<span class="badge sale">OFERTA</span>';
          else if (p.badge === "POPULAR")
            badgeHTML =
              '<span class="badge" style="background:#f1c40f; color:#333;">POPULAR</span>';

          grid.innerHTML += `
                    <div class="product-card" style="--i: ${index}" onclick="openModal(${
            p.id
          })">
                        ${badgeHTML}
                        <div class="p-image">
                            <img src="${p.img}" alt="${p.name}" loading="lazy">
                            <button class="quick-view-btn"><i class="far fa-eye"></i> Ver Detalle</button>
                        </div>
                        <div class="p-info">
                            <span class="p-cat">${p.cat}</span>
                            <h3 class="p-title">${p.name}</h3>
                            <div class="p-price">S/ ${p.price.toFixed(2)}</div>
                        </div>
                    </div>
                `;
        });
      }
      render(products);

      function filterProducts() {
        const txt = document
          .getElementById("search")
          .value.toLowerCase()
          .trim();
        const filtered = products.filter(
          (p) =>
            p.name.toLowerCase().includes(txt) ||
            p.cat.toLowerCase().includes(txt)
        );
        render(filtered);
        document
          .querySelectorAll(".filter-btn")
          .forEach((b) => b.classList.remove("active"));
        document
          .querySelector(".filter-btn:first-child")
          .classList.add("active");
      }

      function filterCat(cat, btn) {
        document.getElementById("search").value = "";
        document
          .querySelectorAll(".filter-btn")
          .forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        if (cat === "todos") render(products);
        else render(products.filter((p) => p.cat === cat));
      }

      /* --- LÓGICA MODAL CARRUSEL --- */
      function openModal(id) {
        currentModalProduct = products.find((p) => p.id === id);
        selectedSize = null;

        document.getElementById("m-title").innerText = currentModalProduct.name;
        document.getElementById(
          "m-price"
        ).innerText = `S/ ${currentModalProduct.price.toFixed(2)}`;
        document.getElementById("m-desc").innerText = currentModalProduct.desc;
        document.getElementById("m-cat-label").innerText =
          currentModalProduct.cat;

        currentModalSlide = 0;
        const track = document.getElementById("m-slider-track");
        track.innerHTML = "";

        const imagesToLoad =
          currentModalProduct.images && currentModalProduct.images.length > 0
            ? currentModalProduct.images
            : [currentModalProduct.img, currentModalProduct.img];

        imagesToLoad.forEach((src) => {
          const imgEl = document.createElement("img");
          imgEl.src = src;
          imgEl.classList.add("modal-slide");
          track.appendChild(imgEl);
        });
        updateModalSlider();

        document
          .querySelectorAll(".size-opt")
          .forEach((s) => s.classList.remove("selected"));
        const btn = document.getElementById("btn-add-modal");
        btn.disabled = true;
        btn.innerHTML =
          '<i class="fas fa-exclamation-circle"></i> Selecciona una talla';

        document.getElementById("overlay").classList.add("active");
        document.getElementById("modal").classList.add("active");
        document.body.style.overflow = "hidden";
      }

      function moveModalSlide(n) {
        const slides = document.querySelectorAll(".modal-slide");
        if (slides.length === 0) return;
        currentModalSlide += n;
        if (currentModalSlide >= slides.length) currentModalSlide = 0;
        if (currentModalSlide < 0) currentModalSlide = slides.length - 1;
        updateModalSlider();
      }

      function updateModalSlider() {
        const track = document.getElementById("m-slider-track");
        track.style.transform = `translateX(-${currentModalSlide * 100}%)`;
      }

      function selectSize(el, size) {
        document
          .querySelectorAll(".size-opt")
          .forEach((s) => s.classList.remove("selected"));
        el.classList.add("selected");
        selectedSize = size;
        const btn = document.getElementById("btn-add-modal");
        btn.disabled = false;
        btn.innerHTML =
          '<i class="fas fa-shopping-bag"></i> Agregar al Carrito';
      }

      function closeAll() {
        document.getElementById("overlay").classList.remove("active");
        document.getElementById("modal").classList.remove("active");

        // CORREGIDO: También quitamos 'active' del carrito para que se esconda
        document.getElementById("cart-sidebar").classList.remove("active");

        document.body.style.overflow = "auto";
      }

      function addToCartModal() {
        if (!selectedSize || !currentModalProduct) return;
        const uniqueID = `${currentModalProduct.id}-${selectedSize}`;
        const existingIndex = cart.findIndex((i) => i.uid === uniqueID);
        if (existingIndex > -1) {
          cart[existingIndex].qty++;
        } else {
          cart.push({
            uid: uniqueID,
            id: currentModalProduct.id,
            name: currentModalProduct.name,
            price: currentModalProduct.price,
            img: currentModalProduct.img,
            size: selectedSize,
            qty: 1,
          });
        }

        const cartIcon = document.querySelector(".cart-trigger");
        cartIcon.classList.add("shaking");
        setTimeout(() => cartIcon.classList.remove("shaking"), 500);

        saveCart();
        updateCartUI();
        closeAll();
        showToast();
      }

      function updateCartUI() {
        const container = document.getElementById("cart-body");
        const totalEl = document.getElementById("cart-total");
        const countEl = document.getElementById("cart-count");
        let total = 0;
        let itemsCount = 0;
        if (cart.length === 0) {
          container.innerHTML = `<div class="cart-empty-state"><i class="fas fa-shopping-basket"></i><p>Tu bolsa está vacía.<br>¡Vamos a llenarla de estilo!</p></div>`;
          totalEl.innerText = "S/ 0.00";
          countEl.innerText = "0";
          countEl.style.display = "none";
          return;
        }
        countEl.style.display = "flex";
        container.innerHTML = "";
        cart.forEach((item) => {
          total += item.price * item.qty;
          itemsCount += item.qty;
          container.innerHTML += `
                    <div class="cart-item">
                        <img src="${item.img}" alt="${item.name}">
                        <div class="cart-item-info">
                            <h4 class="cart-item-title">${item.name}</h4>
                            <span class="cart-item-meta">Talla: <strong>${
                              item.size
                            }</strong></span>
                            <div class="cart-item-price">S/ ${(
                              item.price * item.qty
                            ).toFixed(2)}</div>
                            <div class="qty-controls">
                                <button class="qty-btn" onclick="changeQty('${
                                  item.uid
                                }', -1)"><i class="fas fa-minus"></i></button>
                                <span class="qty-count">${item.qty}</span>
                                <button class="qty-btn" onclick="changeQty('${
                                  item.uid
                                }', 1)"><i class="fas fa-plus"></i></button>
                            </div>
                        </div>
                        <button class="btn-delete" onclick="removeItem('${
                          item.uid
                        }')" title="Eliminar"><i class="fas fa-trash"></i></button>
                    </div>`;
        });
        totalEl.innerText = `S/ ${total.toFixed(2)}`;
        countEl.innerText = itemsCount;
      }

      function changeQty(uid, delta) {
        const itemIndex = cart.findIndex((i) => i.uid === uid);
        if (itemIndex > -1) {
          cart[itemIndex].qty += delta;
          if (cart[itemIndex].qty <= 0) {
            cart.splice(itemIndex, 1);
          }
          saveCart();
          updateCartUI();
        }
      }
      function removeItem(uid) {
        cart = cart.filter((i) => i.uid !== uid);
        saveCart();
        updateCartUI();
      }
      function saveCart() {
        localStorage.setItem("cart", JSON.stringify(cart));
      }
      function toggleCart() {
        const sidebar = document.getElementById("cart-sidebar");
        const overlay = document.getElementById("overlay");
        if (sidebar.classList.contains("active")) {
          closeAll();
        } else {
          sidebar.classList.add("active");
          overlay.classList.add("active");
          document.body.style.overflow = "hidden";
        }
      }
      function showToast() {
        const t = document.getElementById("toast");
        t.classList.add("show");
        if (window.toastTimeout) clearTimeout(window.toastTimeout);
        window.toastTimeout = setTimeout(
          () => t.classList.remove("show"),
          3000
        );
      }
      function checkout() {
        if (cart.length === 0) return showToast("Tu carrito está vacío");
        let msg =
          "¡Hola *Tóxica como tú*! 💕 Estoy interesada en realizar el siguiente pedido:%0A%0A";
        let total = 0;
        cart.forEach((i, index) => {
          const sub = i.price * i.qty;
          total += sub;
          msg += `*${index + 1}.* ${i.name}%0A   ▪ Talla: ${
            i.size
          }%0A   ▪ Cantidad: ${i.qty}%0A   ▪ Subtotal: S/ ${sub.toFixed(
            2
          )}%0A%0A`;
        });
        msg += `--------------------------------%0A*💰 TOTAL A PAGAR: S/ ${total.toFixed(
          2
        )}*%0A--------------------------------%0A%0A`;
        msg +=
          "Quedo atenta a la confirmación del stock y los datos para el pago. ¡Gracias!";
        window.open(`https://wa.me/51903538378?text=${msg}`, "_blank");
      }
      updateCartUI();
    </script>
  </body>
</html>
